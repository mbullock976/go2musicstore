<div>
    <h2>Shopping Cart</h2>
    <br />
    <div class="shoppingCartItems row">
        <div>
            <a class="col-sm-4" ui-sref="storeAccount({userIdentityName: storeAccount.userIdentityName})"><< Back to Store Account</a>
            <br />
            <!--<a ui-sref="addCreditCard({userIdentityName: storeAccount.userIdentityName})"
                   class="btn btn-sm btn-primary">Add Credit Card</a>
            <br />-->
        </div>        
        <!--<div ui-view="">
        </div>-->
        <div>
            <a style="float: right" class="btn btn-success" ui-sref="checkout({storeAccountId: storeAccount.storeAccountId, albumId: -1})">Checkout</a>
            <br />
        </div>
        <br />
        <label style="color: red; float: right;">{{lastSavedDateTime}}</label>
        <ul class="shoppingCartItemRow">
            <li data-ng-repeat="i in shoppingCartItemsList" style="background-color: red">

                <div style="background-color: lightgoldenrodyellow; border: #5d5a53 1px dotted;">

                    <a ui-sref="shoppingCart({userIdentityName: storeAccount.userIdentityName})" style="background-color: transparent;color: red; float: right; padding: 5px;"
                       data-ng-click="delete(i.shoppingCartItemId)">X</a>
                    
                    <form class="form-horizontal" name="shoppingCartItemForm" novalidate data-ng-submit="update(i.shoppingCartItemId)">
                        <div class="form-group">
                            <label class="control-label col-sm-2">CartItem Id:</label>
                            <div class="col-sm-5">
                                <label class="control-label" data-ng-model="i.shoppingCartItemId">{{i.shoppingCartItemId}}</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-2" for="quantity">Quantity:</label>
                            <div class="col-sm-5">
                                <input type="number" class="form-control" id="quantity" name="quantity" data-ng-model="i.quantity"
                                       ng-blur="i.totalPrice = i.quantity * i.album.price; i.inStock = i.quantity <= i.album.stockCount" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-2" for="quantity">In Stock:</label>
                            <div class="col-sm-5">
                                <label style="color: green" class="control-label" ng-show="i.inStock" id="inStock" name="inStock" data-ng-model="i.inStock">{{i.inStock}}</label>
                                <label style="color: red" class="control-label" ng-hide="i.inStock" id="outStock" name="outStock" data-ng-model="i.inStock">{{i.inStock}}</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-2">Album Title:</label>
                            <div class="col-sm-5">                                
                                <label class="control-label"><a ui-sref="album({albumId: i.album.albumId})">{{i.album.title}}</a></label> 
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-2">Artist:</label>
                            <div class="col-sm-5">
                                <label class="control-label"><a ui-sref="artist({artistId: i.album.artist.artistId})">{{i.album.artist.name}}</a></label> 
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-2">Genre:</label>
                            <div class="col-sm-5">
                                <label class="control-label"><a ui-sref="genre({genreId: i.album.artist.genre.genreId})">{{i.album.artist.genre.name}}</a></label> 
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-2">Price:</label>
                            <div class="col-sm-5">
                                <label class="control-label" data-ng-model="i.album.price">{{i.album.price | currency:"£"}}</label>
                            </div>
                        </div>
                        <div class="form-group" style="color: green; font-size: 16px">
                            <label class="control-label col-sm-2">Total Price:</label>
                            <div class="col-sm-5">
                                <label class="control-label" data-ng-model="i.totalPrice" id="totalPrice" name="totalPrice">{{i.totalPrice | currency:"£"}}</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                                <button type="submit" class="btn btn-sm  btn-primary" data-ng-disabled="shoppingCartItemForm.$invalid">Update</button>
                                <!--<button type="button" class="btn btn-sm  btn-danger" data-ng-click="delete(i.creditCardId)">Delete</button>-->
                            </div>
                        </div>

                    </form>

                </div>
            </li>
        </ul>
    </div>
</div>